/*! jquery-placepicker 26-12-2018 */

!function(L,y){var t="placepicker",n={map:"",mapIconClass:"glyphicon glyphicon-globe",mapOptions:{zoom:15},places:{icons:!1},autoCompleteOptions:{},placeChanged:null,location:null,preventSubmit:!0};var a=function(o,a){var e,i,l,n,s=this,c=null,r=null,p=null,t=null;function u(){if(a.mapContainerId){var e=L(o),t=e.parent(),n=t.children().index(o);e.replaceWith('<div class="input-group"><span class="input-group-btn"><button type="button" data-toggle="collapse" href="#'+a.mapContainerId+'" class="btn btn-default"><span class="'+a.mapIconClass+'"></span></button></span></div>'),t.children().eq(n).append(o)}}function g(e){if(e){var t={query:e};r&&r.textSearch(t,function(e,t){if(t===google.maps.places.PlacesServiceStatus.OK)for(var n=0;n<e.length;n++)return void m(e[n])})}}function d(e){c.geocode({latLng:e},function(e,t){t===google.maps.GeocoderStatus.OK&&e[0]&&m(e[0],!1)})}function v(){(e=L(a.map).get(0))||a.mapContainerId&&(e=L("#"+a.mapContainerId+" .placepicker-map").get(0)),e&&(i=new google.maps.Map(e,a.mapOptions),n.bindTo("bounds",i),google.maps.event.addListener(i,"click",function(e){var t=e.latLng;l.setPosition(t),i.panTo(t),o.blur(),d(t)}),l=new google.maps.Marker({map:i}),r=new google.maps.places.PlacesService(i),L(e).parent().on("show.bs.collapse",function(e){L(e.target).css("display","block").find("img[src*='gstatic.com/'], img[src*='googleapis.com/']").css("max-width","none"),o.value?s.resize():s.geoLocation(),L(e.target).css("display","")}))}function f(){s.resize.call(s)}function m(e,t){t=void 0===t,p=e,s.resize();var n=e.geometry.location;t&&h(n),L(a.latitudeInput).prop("value",n.lat()),L(a.longitudeInput).prop("value",n.lng()),t||(o.value=e.formatted_address),"function"==typeof a.placeChanged&&a.placeChanged.call(s,e)}function h(e){if(i){i.setCenter(e);var t=a.icon||a.placesIcon&&place.icon?place.icon:null;if(t){var n={url:t,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(35,35)};l.setIcon(n)}l.setPosition(e),l.setVisible(!0)}}this.setValue=function(e){g(o.value=e)},this.getValue=function(){return o.value},this.setLocation=function(e,t){var n=new google.maps.LatLng(e,t);this.setLatLng(n)},this.getLocation=function(){var e=this.getLatLng();return{latitude:e&&e.lat()||a.latitude,longitude:e&&e.lng()||a.longitude}},this.setLatLng=function(e){d(t=e)},this.getLatLng=function(){return p&&p.geometry?p.geometry.location:t},this.getMap=function(){return i},this.reload=function(){i&&g(o.value)},this.resize=function(){if(i){var e=i.getCenter();google.maps.event.trigger(i,"resize"),i.setCenter(e)}},this.geoLocation=function(n){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){var t=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);h(t),d(t),n&&n(t)},function(){n&&n(null)}):n&&n(null)},function(){if(c=new google.maps.Geocoder,function(){var n=o.addEventListener?o.addEventListener:o.attachEvent;function e(e,t){if("keydown"===e){var a=t;t=function(e){var t=0<L(".pac-item-selected").length;if((13===e.which||13===e.keyCode)&&!t){var n=L.Event("keydown",{keyCode:40,which:40});a.apply(o,[n])}a.apply(o,[e])}}n.apply(o,[e,t])}o.addEventListener=e,o.attachEvent=e}(),u(),n=new google.maps.places.Autocomplete(o,a.autoCompleteOptions),google.maps.event.addListener(n,"place_changed",function(){var e=n.getPlace();e.geometry&&m(e)}),v(),o.value)g(o.value);else{var e=a.latitude||L(a.latitudeInput).prop("value"),t=a.longitude||L(a.longitudeInput).prop("value");e&&t&&s.setLocation(e,t)}L(y).on("resize",f),L(o).on("keypress",function(e){a.preventSubmit&&13===e.keyCode&&(e.preventDefault(),e.stopImmediatePropagation())}),L(o).on("keyup",function(e){var t=e.target.value.split(",");if(2===t.length){var n=t[0],a=t[1],o=isFinite(n)&&Math.abs(n)<=90,i=isFinite(a)&&Math.abs(a)<=180;o&&i&&h(new google.maps.LatLng(parseFloat(n),parseFloat(a)))}})}.call(this)};L.fn[t]=function(e){return this.each(function(){return L(this).data(t)||L(this).data(t,new a(this,L.extend({},n,e,L(this).data()))),L(this)})}}(jQuery,window);